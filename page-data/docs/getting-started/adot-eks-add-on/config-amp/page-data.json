{
    "componentChunkName": "component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js",
    "path": "/docs/getting-started/adot-eks-add-on/config-amp",
    "result": {"data":{"mdx":{"id":"413184b3-17c5-56fb-86d8-f25de55683b0","excerpt":"Create your Amazon Managed Prometheus Workspace Open your Amazon Managed Prometheus console at  https://console.aws.amazon.com/prometheus/home Type the name forâ€¦","fields":{"slug":"/docs/getting-started/adot-eks-add-on/config-amp/"},"frontmatter":{"title":"Collector Configuration for Amazon Managed Prometheus","description":"This page introduces Collector configuration for AMP for the ADOT Collector.","image":null,"disableTableOfContents":null},"body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Collector Configuration for Amazon Managed Prometheus\",\n  \"description\": \"This page introduces Collector configuration for AMP for the ADOT Collector.\",\n  \"path\": \"/docs/getting-started/adot-eks-add-on/config-amp\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"create-your-amazon-managed-prometheus-workspace\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#create-your-amazon-managed-prometheus-workspace\",\n    \"aria-label\": \"create your amazon managed prometheus workspace permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Create your Amazon Managed Prometheus Workspace\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Open your Amazon Managed Prometheus console at \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://console.aws.amazon.com/prometheus/home\"\n  }, \"https://console.aws.amazon.com/prometheus/home\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Type the name for your workspace and click create button\")), mdx(\"h2\", {\n    \"id\": \"collector-configuration\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#collector-configuration\",\n    \"aria-label\": \"collector configuration permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Collector Configuration\"), mdx(\"p\", null, \"The Collector configuration below is set up to receive Prometheus metrics and export to Amazon Managed Prometheus. Note that the Prometheus receiver is meant to be a drop-in replacement for a Prometheus server and is capable of scraping metrics from microservices instrumented with the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://prometheus.io/docs/instrumenting/clientlibs/\"\n  }, \"Prometheus client library\"), \". It also supports the full set of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/prometheus/prometheus/blob/v2.28.1/docs/configuration/configuration.md#scrape_config\"\n  }, \"Prometheus configuration\"), \". The Prometheus Remote Write Exporter employs the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write\"\n  }, \"remote write\"), \" feature and sends metrics data to an existing Amazon Managed Prometheus workspace for long term storage. Note that the file below is also hosted \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/aws-observability/aws-otel-community/blob/master/sample-configs/operator/collector-config-amp.yaml\"\n  }, \"here\"), \". Save this into a file called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"collector-config-amp.yaml\"), \" and execute the command \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"kubectl apply -f collector-config-amp.yaml\\n\")), mdx(\"p\", null, \"to deploy your Collector. Make sure to replace \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<YOUR_REMOTE_WRITE_ENDPOINT>\"), \" in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prometheusremoterwite\"), \" exporter config, and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<YOUR_AWS_REGION>\"), \" in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sigv4auth\"), \" extension config, as per your own target environment. Note that a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ClusterRole\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ClusterRoleBinding\"), \" will also be created, which provide necessary permissions for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prometheus\"), \" receiver during service discovery.\"), mdx(\"details\", null, mdx(\"summary\", null, \"Click to View: Collector Configuration for Amazon Managed Prometheus\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"#\\n# OpenTelemetry Collector configuration\\n# Metrics pipeline with Prometheus Receiver and Prometheus Remote Write Exporter sending metrics to Amazon Managed Prometheus\\n#\\n---\\napiVersion: opentelemetry.io/v1alpha1\\nkind: OpenTelemetryCollector\\nmetadata:\\n  name: my-collector-amp\\nspec:\\n  mode: deployment\\n  serviceAccount: adot-collector\\n  podAnnotations:\\n    prometheus.io/scrape: 'true'\\n    prometheus.io/port: '8888'\\n  config: |\\n    extensions:\\n      sigv4auth:\\n        region: <YOUR_AWS_REGION>\\n        service: \\\"aps\\\"\\n\\n    receivers:\\n      #\\n      # Scrape configuration for the Prometheus Receiver\\n      # This is the same configuration used when Prometheus is installed using the community Helm chart\\n      #     \\n      prometheus:\\n        config:\\n          global:\\n            scrape_interval: 15s\\n            scrape_timeout: 10s\\n\\n          scrape_configs:\\n          - job_name: kubernetes-apiservers\\n            bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token\\n            kubernetes_sd_configs:\\n            - role: endpoints\\n            relabel_configs:\\n            - action: keep\\n              regex: default;kubernetes;https\\n              source_labels:\\n              - __meta_kubernetes_namespace\\n              - __meta_kubernetes_service_name\\n              - __meta_kubernetes_endpoint_port_name\\n            scheme: https\\n            tls_config:\\n              ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt\\n              insecure_skip_verify: true\\n\\n          - job_name: kubernetes-nodes\\n            bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token\\n            kubernetes_sd_configs:\\n            - role: node\\n            relabel_configs:\\n            - action: labelmap\\n              regex: __meta_kubernetes_node_label_(.+)\\n            - replacement: kubernetes.default.svc:443\\n              target_label: __address__\\n            - regex: (.+)\\n              replacement: /api/v1/nodes/$$1/proxy/metrics\\n              source_labels:\\n              - __meta_kubernetes_node_name\\n              target_label: __metrics_path__\\n            scheme: https\\n            tls_config:\\n              ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt\\n              insecure_skip_verify: true\\n\\n          - job_name: kubernetes-nodes-cadvisor\\n            bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token\\n            kubernetes_sd_configs:\\n            - role: node\\n            relabel_configs:\\n            - action: labelmap\\n              regex: __meta_kubernetes_node_label_(.+)\\n            - replacement: kubernetes.default.svc:443\\n              target_label: __address__\\n            - regex: (.+)\\n              replacement: /api/v1/nodes/$$1/proxy/metrics/cadvisor\\n              source_labels:\\n              - __meta_kubernetes_node_name\\n              target_label: __metrics_path__\\n            scheme: https\\n            tls_config:\\n              ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt\\n              insecure_skip_verify: true\\n\\n          - job_name: kubernetes-service-endpoints\\n            kubernetes_sd_configs:\\n            - role: endpoints\\n            relabel_configs:\\n            - action: keep\\n              regex: true\\n              source_labels:\\n              - __meta_kubernetes_service_annotation_prometheus_io_scrape\\n            - action: replace\\n              regex: (https?)\\n              source_labels:\\n              - __meta_kubernetes_service_annotation_prometheus_io_scheme\\n              target_label: __scheme__\\n            - action: replace\\n              regex: (.+)\\n              source_labels:\\n              - __meta_kubernetes_service_annotation_prometheus_io_path\\n              target_label: __metrics_path__\\n            - action: replace\\n              regex: ([^:]+)(?::\\\\d+)?;(\\\\d+)\\n              replacement: $$1:$$2\\n              source_labels:\\n              - __address__\\n              - __meta_kubernetes_service_annotation_prometheus_io_port\\n              target_label: __address__\\n            - action: labelmap\\n              regex: __meta_kubernetes_service_annotation_prometheus_io_param_(.+)\\n              replacement: __param_$$1\\n            - action: labelmap\\n              regex: __meta_kubernetes_service_label_(.+)\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_namespace\\n              target_label: kubernetes_namespace\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_service_name\\n              target_label: kubernetes_name\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_pod_node_name\\n              target_label: kubernetes_node\\n\\n          - job_name: kubernetes-service-endpoints-slow\\n            kubernetes_sd_configs:\\n            - role: endpoints\\n            relabel_configs:\\n            - action: keep\\n              regex: true\\n              source_labels:\\n              - __meta_kubernetes_service_annotation_prometheus_io_scrape_slow\\n            - action: replace\\n              regex: (https?)\\n              source_labels:\\n              - __meta_kubernetes_service_annotation_prometheus_io_scheme\\n              target_label: __scheme__\\n            - action: replace\\n              regex: (.+)\\n              source_labels:\\n              - __meta_kubernetes_service_annotation_prometheus_io_path\\n              target_label: __metrics_path__\\n            - action: replace\\n              regex: ([^:]+)(?::\\\\d+)?;(\\\\d+)\\n              replacement: $$1:$$2\\n              source_labels:\\n              - __address__\\n              - __meta_kubernetes_service_annotation_prometheus_io_port\\n              target_label: __address__\\n            - action: labelmap\\n              regex: __meta_kubernetes_service_annotation_prometheus_io_param_(.+)\\n              replacement: __param_$$1\\n            - action: labelmap\\n              regex: __meta_kubernetes_service_label_(.+)\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_namespace\\n              target_label: kubernetes_namespace\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_service_name\\n              target_label: kubernetes_name\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_pod_node_name\\n              target_label: kubernetes_node\\n            scrape_interval: 5m\\n            scrape_timeout: 30s\\n            \\n          - job_name: prometheus-pushgateway\\n            kubernetes_sd_configs:\\n            - role: service\\n            relabel_configs:\\n            - action: keep\\n              regex: pushgateway\\n              source_labels:\\n              - __meta_kubernetes_service_annotation_prometheus_io_probe\\n\\n          - job_name: kubernetes-services\\n            kubernetes_sd_configs:\\n            - role: service\\n            metrics_path: /probe\\n            params:\\n              module:\\n              - http_2xx\\n            relabel_configs:\\n            - action: keep\\n              regex: true\\n              source_labels:\\n              - __meta_kubernetes_service_annotation_prometheus_io_probe\\n            - source_labels:\\n              - __address__\\n              target_label: __param_target\\n            - replacement: blackbox\\n              target_label: __address__\\n            - source_labels:\\n              - __param_target\\n              target_label: instance\\n            - action: labelmap\\n              regex: __meta_kubernetes_service_label_(.+)\\n            - source_labels:\\n              - __meta_kubernetes_namespace\\n              target_label: kubernetes_namespace\\n            - source_labels:\\n              - __meta_kubernetes_service_name\\n              target_label: kubernetes_name\\n\\n          - job_name: kubernetes-pods\\n            kubernetes_sd_configs:\\n            - role: pod\\n            relabel_configs:\\n            - action: keep\\n              regex: true\\n              source_labels:\\n              - __meta_kubernetes_pod_annotation_prometheus_io_scrape\\n            - action: replace\\n              regex: (https?)\\n              source_labels:\\n              - __meta_kubernetes_pod_annotation_prometheus_io_scheme\\n              target_label: __scheme__\\n            - action: replace\\n              regex: (.+)\\n              source_labels:\\n              - __meta_kubernetes_pod_annotation_prometheus_io_path\\n              target_label: __metrics_path__\\n            - action: replace\\n              regex: ([^:]+)(?::\\\\d+)?;(\\\\d+)\\n              replacement: $$1:$$2\\n              source_labels:\\n              - __address__\\n              - __meta_kubernetes_pod_annotation_prometheus_io_port\\n              target_label: __address__\\n            - action: labelmap\\n              regex: __meta_kubernetes_pod_annotation_prometheus_io_param_(.+)\\n              replacement: __param_$$1\\n            - action: labelmap\\n              regex: __meta_kubernetes_pod_label_(.+)\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_namespace\\n              target_label: kubernetes_namespace\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_pod_name\\n              target_label: kubernetes_pod_name\\n            - action: drop\\n              regex: Pending|Succeeded|Failed|Completed\\n              source_labels:\\n              - __meta_kubernetes_pod_phase\\n\\n          - job_name: kubernetes-pods-slow\\n            scrape_interval: 5m\\n            scrape_timeout: 30s          \\n            kubernetes_sd_configs:\\n            - role: pod\\n            relabel_configs:\\n            - action: keep\\n              regex: true\\n              source_labels:\\n              - __meta_kubernetes_pod_annotation_prometheus_io_scrape_slow\\n            - action: replace\\n              regex: (https?)\\n              source_labels:\\n              - __meta_kubernetes_pod_annotation_prometheus_io_scheme\\n              target_label: __scheme__\\n            - action: replace\\n              regex: (.+)\\n              source_labels:\\n              - __meta_kubernetes_pod_annotation_prometheus_io_path\\n              target_label: __metrics_path__\\n            - action: replace\\n              regex: ([^:]+)(?::\\\\d+)?;(\\\\d+)\\n              replacement: $$1:$$2\\n              source_labels:\\n              - __address__\\n              - __meta_kubernetes_pod_annotation_prometheus_io_port\\n              target_label: __address__\\n            - action: labelmap\\n              regex: __meta_kubernetes_pod_annotation_prometheus_io_param_(.+)\\n              replacement: __param_$1\\n            - action: labelmap\\n              regex: __meta_kubernetes_pod_label_(.+)\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_namespace\\n              target_label: namespace\\n            - action: replace\\n              source_labels:\\n              - __meta_kubernetes_pod_name\\n              target_label: pod\\n            - action: drop\\n              regex: Pending|Succeeded|Failed|Completed\\n              source_labels:\\n              - __meta_kubernetes_pod_phase\\n                                \\n    processors:\\n      batch/metrics:\\n        timeout: 60s         \\n\\n    exporters:\\n      prometheusremotewrite:\\n        endpoint: <YOUR_REMOTE_WRITE_ENDPOINT>\\n        auth:\\n          authenticator: sigv4auth\\n\\n    service:\\n      extensions: [sigv4auth]\\n      pipelines:   \\n        metrics:\\n          receivers: [prometheus]\\n          processors: [batch/metrics]\\n          exporters: [prometheusremotewrite]\\n\\n---\\napiVersion: rbac.authorization.k8s.io/v1\\nkind: ClusterRole\\nmetadata:\\n  name: otel-prometheus-role\\nrules:\\n  - apiGroups:\\n      - \\\"\\\"\\n    resources:\\n      - nodes\\n      - nodes/proxy\\n      - services\\n      - endpoints\\n      - pods\\n    verbs:\\n      - get\\n      - list\\n      - watch\\n  - apiGroups:\\n      - extensions\\n    resources:\\n      - ingresses\\n    verbs:\\n      - get\\n      - list\\n      - watch\\n  - nonResourceURLs:\\n      - /metrics\\n    verbs:\\n      - get\\n\\n---\\napiVersion: rbac.authorization.k8s.io/v1\\nkind: ClusterRoleBinding\\nmetadata:\\n  name: otel-prometheus-role-binding\\nroleRef:\\n  apiGroup: rbac.authorization.k8s.io\\n  kind: ClusterRole\\n  name: otel-prometheus-role\\nsubjects:\\n  - kind: ServiceAccount\\n    name: adot-collector\\n    namespace: default\\n\"))), mdx(\"h2\", {\n    \"id\": \"verify-if-the-metrics-data-is-being-sent-to-amazon-managed-prometheus-using-the-awscurl-tool\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#verify-if-the-metrics-data-is-being-sent-to-amazon-managed-prometheus-using-the-awscurl-tool\",\n    \"aria-label\": \"verify if the metrics data is being sent to amazon managed prometheus using the awscurl tool permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Verify if the Metrics Data is being sent to Amazon Managed Prometheus using the awscurl tool\"), mdx(\"p\", null, \"You can use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"awscurl\"), \" to check if Amazon Managed Prometheus received the metrics data. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"awscurl\"), \" tool is a curl like tool with AWS Signature Version 4 request signing. It performs requests to AWS services with requests signing using curl interface, and it supports IAM profile credentials. To learn more about awscurl, please refer to its \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/okigan/awscurl\"\n  }, \"Github repository\"), \".\"), mdx(\"p\", null, \"To install \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"awscurl\"), \", follow the documentation \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/okigan/awscurl/blob/master/README.md#installation\"\n  }, \"here\"), \".\"), mdx(\"p\", null, \"Run the following command to check if Amazon Managed Prometheus received the Prometheus metrics data \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"scrape_duration_seconds\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ awscurl --service=\\\"aps\\\" --region=\\\"<YOUR_AWS_REGION>\\\" \\\\\\n\\\"https://aps-workspaces.<YOUR_AWS_REGION>.amazonaws.com/workspaces/<YOUR_AMP_WORKSPACE_ID>/api/v1/query?query=scrape_duration_seconds\\\"\\n\")), mdx(\"p\", null, \"Your output should look something like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"{\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"resultType\\\":\\\"vector\\\",\\\"result\\\":[{\\\"metric\\\":{\\\"EKS_Container\\\":\\\"cert-manager\\\",\\\"EKS_Namespace\\\":\\\"cert-manager\\\",\\\"EKS_PodName\\\":\\\"cert-manager-858bf78c95-qvq2j\\\",\\\"__name__\\\":\\\"scrape_duration_seconds\\\",\\\"app\\\":\\\"cert-manager\\\",\\\"app_kubernetes_io_component\\\":\\\"controller\\\",\\\"app_kubernetes_io_instance\\\":\\\"cert-manager\\\",\\\"app_kubernetes_io_name\\\":\\\"cert-manager\\\",\\\"instance\\\":\\\"192.168.41.17:9402\\\",\\\"job\\\":\\\"storefront\\\",\\\"pod_template_hash\\\":\\\"858bf78c95\\\"},\\\"value\\\":[1636159948.136,\\\"0.001410662\\\"]}]}}\\n\")), mdx(\"p\", null, \"Make sure to replace the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<YOUR_AWS_REGION>\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"YOUR_AMP_WORKSPACE_ID\"), \" fields for both queries.\"), mdx(\"h2\", {\n    \"id\": \"verify-if-the-metrics-data-is-being-sent-to-amazon-managed-prometheus-using-amazon-managed-grafana\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#verify-if-the-metrics-data-is-being-sent-to-amazon-managed-prometheus-using-amazon-managed-grafana\",\n    \"aria-label\": \"verify if the metrics data is being sent to amazon managed prometheus using amazon managed grafana permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Verify if the Metrics Data is being sent to Amazon Managed Prometheus using Amazon Managed Grafana\"), mdx(\"p\", null, \"Another way to verify if your metrics data is being sent to Amazon Managed Prometheus is by visualizing it in Amazon Managed Grafana. Refer to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/grafana/latest/userguide/getting-started-with-AMG.html\"\n  }, \"Getting started with Amazon Managed Grafana guide\"), \" for more information.\"), mdx(\"h2\", {\n    \"id\": \"previous-topic-collector-configuration-introduction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#previous-topic-collector-configuration-introduction\",\n    \"aria-label\": \"previous topic collector configuration introduction permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"/docs/getting-started/adot-eks-add-on/config-collector-intro\"\n  }, \"Previous Topic: Collector Configuration Introduction\")), mdx(\"h2\", {\n    \"id\": \"related-topics\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#related-topics\",\n    \"aria-label\": \"related topics permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Related Topics:\"), mdx(\"h3\", {\n    \"id\": \"collector-configuration-for-amazon-cloudwatch\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#collector-configuration-for-amazon-cloudwatch\",\n    \"aria-label\": \"collector configuration for amazon cloudwatch permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"/docs/getting-started/adot-eks-add-on/config-cloudwatch\"\n  }, \"Collector Configuration for Amazon CloudWatch\")), mdx(\"h3\", {\n    \"id\": \"collector-configuration-for-aws-x-ray\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#collector-configuration-for-aws-x-ray\",\n    \"aria-label\": \"collector configuration for aws x ray permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"/docs/getting-started/adot-eks-add-on/config-xray\"\n  }, \"Collector Configuration for AWS X-Ray\")), mdx(\"h3\", {\n    \"id\": \"advanced-collector-configuration-for-amazon-managed-prometheus\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#advanced-collector-configuration-for-amazon-managed-prometheus\",\n    \"aria-label\": \"advanced collector configuration for amazon managed prometheus permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"/docs/getting-started/adot-eks-add-on/config-advanced\"\n  }, \"Advanced Collector Configuration for Amazon Managed Prometheus\")), mdx(\"h2\", {\n    \"id\": \"next-topic-updating-and-cleanup\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#next-topic-updating-and-cleanup\",\n    \"aria-label\": \"next topic updating and cleanup permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"/docs/getting-started/adot-eks-add-on/update-and-cleanup\"\n  }, \"Next Topic: Updating and Cleanup\")));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"depth":2,"value":"Create your Amazon Managed Prometheus Workspace"},{"depth":2,"value":"Collector Configuration"},{"depth":2,"value":"Verify if the Metrics Data is being sent to Amazon Managed Prometheus using the awscurl tool"},{"depth":2,"value":"Verify if the Metrics Data is being sent to Amazon Managed Prometheus using Amazon Managed Grafana"},{"depth":2,"value":"Previous Topic: Collector Configuration Introduction"},{"depth":2,"value":"Related Topics:"},{"depth":3,"value":"Collector Configuration for Amazon CloudWatch"},{"depth":3,"value":"Collector Configuration for AWS X-Ray"},{"depth":3,"value":"Advanced Collector Configuration for Amazon Managed Prometheus"},{"depth":2,"value":"Next Topic: Updating and Cleanup"}]}},"pageContext":{"slug":"/docs/getting-started/adot-eks-add-on/config-amp/","repositoryEditUrl":"https://github.com/rocketseat/gatsby-themes/tree/main/examples/gatsby-theme-docs/src/docs/getting-started/adot-eks-add-on/config-amp.mdx","repositoryProvider":"GitHub"}},
    "staticQueryHashes": ["2501019404","973074209"]}