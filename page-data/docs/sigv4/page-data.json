{
    "componentChunkName": "component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js",
    "path": "/docs/sigv4",
    "result": {"data":{"mdx":{"id":"ad0efabd-63e6-5917-a40a-b1bd278a6316","excerpt":"Introduction AWS Distro for OpenTelemetry (ADOT) has added a new component, the  Sigv4 authentication extension , to the ADOT Collector in the most recent  vâ€¦","fields":{"slug":"/docs/sigv4/"},"frontmatter":{"title":"Adding the Sigv4 Extension to the AWS Distro for OpenTelemetry Collector, and how to Migrate Old Collector Configurations to use it","description":"This blog post introduces the Sigv4 authentication extension, why it was added, how to use it, and how it affects Collector configuration.","image":null,"disableTableOfContents":null},"body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Adding the Sigv4 Extension to the AWS Distro for OpenTelemetry Collector, and how to Migrate Old Collector Configurations to use it\",\n  \"description\": \"This blog post introduces the Sigv4 authentication extension, why it was added, how to use it, and how it affects Collector configuration.\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"introduction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#introduction\",\n    \"aria-label\": \"introduction permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Introduction\"), mdx(\"p\", null, \"AWS Distro for OpenTelemetry (ADOT) has added a new component, the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/sigv4authextension\"\n  }, \"Sigv4 authentication extension\"), \", to the ADOT Collector in the most recent \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/aws-observability/aws-otel-collector/releases/tag/v0.18.0\"\n  }, \"v0.18.0 update\"), \". This post introduces the extension, what it is used for, how to use it, and how this affects Collector configuration.\"), mdx(\"h2\", {\n    \"id\": \"background\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#background\",\n    \"aria-label\": \"background permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Background\"), mdx(\"p\", null, \"The Sigv4 authentication extension provides Sigv4 authentication for making requests to AWS services. It adds authentication information to AWS API requests sent by HTTP. This authentication information is added by signing these requests using your AWS credentials. For more information on the Sigv4 process, see the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html\"\n  }, \"Signature Version 4 signing process\"), \" documentation. For more information on AWS credentials, see the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html\"\n  }, \"Understanding and getting your AWS credentials\"), \" documentation.\"), mdx(\"p\", null, \"Alongside the Sigv4 authentication extension, the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/exporter/prometheusremotewriteexporter\"\n  }, \"Prometheus Remote Write (PRW) exporter\"), \" has also been added to the ADOT Collector. The Sigv4 authentication extension is used in the ADOT Collector as a way for exporters, such as the PRW exporter, to sign HTTP requests with Sigv4. This allows the PRW exporter the ability to export to Amazon Managed Prometheus (AMP). As a result, the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/exporter/awsprometheusremotewriteexporter\"\n  }, \"AWS PRW exporter\"), \" component within the ADOT Collector will be deprecated, and eventually removed. The following section outlines the migration steps needed to switch from the AWS PRW exporter to the PRW exporter with the Sigv4 authentication extension.\"), mdx(\"h2\", {\n    \"id\": \"migration-steps-with-example\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#migration-steps-with-example\",\n    \"aria-label\": \"migration steps with example permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Migration Steps With Example\"), mdx(\"p\", null, \"To migrate a Collector configuration that uses the AWS PRW exporter over to use the Sigv4 authentication extension and PRW exporter, there are three steps that need to be completed. First, we must add the extension to the configuration. Next, we rename the previously used \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"awsprometheusremotewrite\"), \" exporter to be the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prometheusremotewrite\"), \" exporter. We must also remove the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"aws_auth\"), \" field, and add in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"auth\"), \" field, with a subfield \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"authenticator\"), \" that has a value \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sigv4auth\"), \". Lastly, under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"service\"), \", we must again rename the exporter used from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"awsprometheusremotewrite\"), \" to be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prometheusremotewrite\"), \". We also need to add in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"extensions\"), \" field with a value \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sigv4auth\"), \".\"), mdx(\"p\", null, \"Provided below are two configurations. The first configuration uses the AWS PRW exporter, while the second uses the PRW exporter with the Sigv4 authentication extension. \"), mdx(SectionSeparator, {\n    mdxType: \"SectionSeparator\"\n  }), mdx(\"p\", null, \"AWS PRW exporter:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"receivers:\\n  prometheus:\\n    config:\\n      ...\\n \\nexporters:\\n  awsprometheusremotewrite:\\n    endpoint: \\\"https://aps-workspaces.us-west-2.amazonaws.com/workspaces/ws-XXX/api/v1/remote_write\\\"\\n    aws_auth:\\n      region: \\\"us-west-2\\\"\\n      \\nservice:\\n  pipelines:\\n    metrics:\\n      receivers: [prometheus]\\n      exporters: [awsprometheusremotewrite]\\n\")), mdx(SectionSeparator, {\n    mdxType: \"SectionSeparator\"\n  }), mdx(\"p\", null, \"PRW exporter with the Sigv4 authentication extension:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"extensions:\\n  sigv4auth:\\n    region: \\\"us-west-2\\\"\\n\\nreceivers:\\n  prometheus:\\n    config:\\n      ...\\n \\nexporters:\\n  prometheusremotewrite:\\n    endpoint: \\\"https://aps-workspaces.us-west-2.amazonaws.com/workspaces/ws-XXX/api/v1/remote_write\\\"\\n    auth:\\n      authenticator: sigv4auth\\n\\nservice:\\n  extensions: [sigv4auth]\\n  pipelines:\\n    metrics:\\n      receivers: [prometheus]\\n      exporters: [prometheusremotewrite]\\n\")), mdx(\"h2\", {\n    \"id\": \"conclusion\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#conclusion\",\n    \"aria-label\": \"conclusion permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Conclusion\"), mdx(\"p\", null, \"In this post, we\\u2019ve introduced the Sigv4 authentication extension that was introduced in v0.18.0 of the ADOT Collector, why it was added, how to use it, and how to migrate previous Collector configurations that use the AWS PRW exporter to use the PRW exporter and the extension instead. \"), mdx(\"h2\", {\n    \"id\": \"about-the-author\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#about-the-author\",\n    \"aria-label\": \"about the author permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"About the Author\"), mdx(\"img\", {\n    src: erichsueh,\n    alt: \"Diagram\",\n    style: {\n      \"width\": \"200px\"\n    }\n  }), mdx(\"p\", null, \"Eric Hsueh is a Software Development Engineer at Amazon Web Services. His educational background is in Computer Science, with a bachelor\\u2019s degree from the University of California, Irvine. He is interested in Observability and Container Services. Outside of work he has interests in basketball, mixed martial arts, and fashion.\"));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"depth":2,"value":"Introduction"},{"depth":2,"value":"Background"},{"depth":2,"value":"Migration Steps With Example"},{"depth":2,"value":"Conclusion"},{"depth":2,"value":"About the Author"}]}},"pageContext":{"slug":"/docs/sigv4/","repositoryEditUrl":"https://github.com/rocketseat/gatsby-themes/tree/main/examples/gatsby-theme-docs/src/docs/sigv4.mdx","repositoryProvider":"GitHub"}},
    "staticQueryHashes": ["2501019404","973074209"]}