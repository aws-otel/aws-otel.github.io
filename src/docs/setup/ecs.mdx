---
title: 'Setting up AWS Distro for OpenTelemetry Collector in Amazon Elastic Container Service'
description:
    In this tutorial, we will demonstrate how to run AWS Distro for OpenTelemetry Collector (AWS Otel Collector) as a
    sidecar on the Amazon Elastic Container Service (Amazon ECS) in Fargate and in Amazon Elastic Compute Cloud
    (Amazon EC2) mode. We provide a sample application within the same Amazon ECS task to send monitoring data to
    AWS OTel Collector.
path: '/docs/setup/ecs'
---

import SectionSeparator from "components/MdxSectionSeparator/sectionSeparator.jsx"
import { Link } from "gatsby"
import img8 from "assets/img/docs/img8.png"
import img9 from "assets/img/docs/img9.png"

In this tutorial, we will demonstrate how to run AWS Distro for OpenTelemetry Collector (AWS Otel Collector) as a
sidecar on the Amazon Elastic Container Service (Amazon ECS) in Fargate and in Amazon Elastic Compute Cloud
(Amazon EC2) mode. We provide a sample application within the same Amazon ECS task to send monitoring data to AWS
OTel Collector.


<SectionSeparator />

## 1. Create a Cluster

If you don't have a cluster, follow this <Link to="/docs/setup/ecs/create-cluster">tutorial</Link> to create a new one.

<SectionSeparator />

## 2. Setup the AWS OTel Collector

There are three different ways to get started by installing AWS OTel Collector as a sidecar in ECS- using CloudFormation template, using Task 
Definition, and using AWS Management Console. Follow any of the following three options to setup the collector.

### 2.1 Setup using CloudFormation template

The CloudFormation template will create all the necessary resources to get the Collector ready. This option is recommended for the beginners 
who are new to ECS.

- <Link to="/docs/setup/ecs/cfn-for-ecs-ec2">Deploy AOT for ECS on EC2</Link>
- <Link to="/docs/setup/ecs/cfn-for-ecs-fargate">Deploy AOT for ECS on Fargate</Link> 

### 2.2 Setup using ECS Task Definition
        
This option is recommended for developers who are familier with ECS and know how to run a task using a given task definition.

- <Link to="/docs/setup/ecs/create-iam-policy">Create IAM Policy</Link> 
- <Link to="/docs/setup/ecs/create-iam-role">Create IAM Role</Link> 
- **Create Task Definition**
    * <Link to="/docs/setup/ecs/task-definition-for-ecs-ec2">Create task definition for ECS on EC2</Link>  
    * <Link to="/docs/setup/ecs/task-definition-for-ecs-fargate">Create task definition for ECS on Fargate</Link>  
- <Link to="/docs/setup/ecs/run-task">Deploy Task</Link> 

### 2.3 Setup using AWS Management Console

This option shows the whole process step by step to setup AWS OTel Collector using AWS Management Console. 
- <Link to="/docs/setup/ecs/create-iam-policy">Create IAM Policy</Link> 
- <Link to="/docs/setup/ecs/create-iam-role">Create IAM Role</Link> 
- <Link to="/docs/setup/ecs/create-task-definition-console">Create Task Definition using AWS Console</Link> 
- <Link to="/docs/setup/ecs/run-task">Run Task</Link>  

<SectionSeparator />

## 3. Results

* <Link to="/docs/setup/ecs/results-metrics">See container metrics in CloudWatch</Link> 
* <Link to="/docs/setup/ecs/results-traces">See traces in AWS X-Ray</Link>
* <Link to="/docs/setup/ecs/results-statsd-metrics">See StatsD metrics in CloudWatch</Link>

<SectionSeparator />

## 4. Custom OpenTelemetry Configuration

<Link to="/docs/setup/ecs/config-through-ssm">[Optional] Use custom OpenTelemetry configuration file from SSM Parameter</Link> 

<SectionSeparator />

## 5. Reference

* [Getting Started with AWS ECS Container Metrics Receiver](https://aws-otel.github.io/docs/components/ecs-metrics-receiver)
* [Getting Started with AWS X-Ray Receiver](https://aws-otel.github.io/docs/components/x-ray-receiver)

**Note:**
After you finished the tutorial, remember to shut down the new ECS cluster created in the tutorial in order to avoid any charges.


